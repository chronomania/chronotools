NOTES

   Read readme.html

THE REST OF THIS FILE IS MY NOTES

Ks transnotes.txt

----------------

darkforcelta apua:
   cmp #$80
   bcc _label_   { branch A < $80}
   bcs _label_   { branch A >= $80}
   beq _label_   { branch A = $80}
   bne _label_   { branch A != $80 }

   lda $7e2000
   bmi _label_   { branch if (A & $80) = $80 } (similar in 16-bit mode)
   bpl _label_   { branch if (A & $80) = $00 }

// DIALOGIN PIIRTO - ASSEMBLER

// Tästä hypätään ->C0:2126
$C0:2018 20 26 21    JSR [DB:$2126]       ;$00:2126     A:7700 X:07E0 Y:001F D:0100 DB:00 PB:C0
// Tämä on lause, johon 21A7 palaa.
$C0:201B 6B          RTL                                A:0001 X:0058 Y:0200 D:0100 DB:00 PB:C0

// Täällä tarkistetaan erikoiskoodeja.
//  215 = erikoiskoodi, asetettu muualla
$C0:2126 AD 15 02    LDA [DB:$0215]       ;$00:0215     A:7700 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C0:2129 D0 03       BNE $212E                          A:7710 X:07E0 Y:001F D:0100 DB:00 PB:C0
// Ei ollut 0
$C0:212E C9 09       CMP A, $09    eli CLS              A:7710 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C0:2130 F0 2F       BEQ $2161                          A:7710 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C0:2132 C9 0A       CMP A, $0A    eli CLS3             A:7710 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C0:2134 F0 2B       BEQ $2161                          A:7710 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C0:2136 C9 0B       CMP A, $0B    eli PAUSE            A:7710 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C0:2138 F0 27       BEQ $2161                          A:7710 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C0:213A C9 0C       CMP A, $0C    eli PAUSE3           A:7710 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C0:213C F0 23       BEQ $2161                          A:7710 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C0:213E C9 05       CMP A, $05    eli NL               A:7710 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C0:2140 F0 19       BEQ $215B                          A:7710 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C0:2142 C9 06       CMP A, $06    eli NL3              A:7710 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C0:2144 F0 15       BEQ $215B                          A:7710 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C0:2146 C9 07       CMP A, $07    eli PAUSENL          A:7710 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C0:2148 F0 11       BEQ $215B                          A:7710 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C0:214A C9 08       CMP A, $08    eli PAUSENL3         A:7710 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C0:214C F0 0D       BEQ $215B                          A:7710 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C0:214E C9 03       CMP A, $03    eli DELAY            A:7710 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C0:2150 F0 02       BEQ $2154                          A:7710 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C0:2152 80 19       BRA $216D                          A:7710 X:07E0 Y:001F D:0100 DB:00 PB:C0

// 215B: newline-handler

// 2161: cls-handler

// 216D: muu merkki
//        0213: nyt tulostettavien merkkien määrä
$C0:216D A9 01       LDA A, $01                         A:7710 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C0:216F 8D 13 02    STA [DB:$0213]       ;$00:0213     A:7701 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C0:2172 22 09 00 C2 JSL [$C2:$0009]      ;$C2:0009     A:7701 X:07E0 Y:001F D:0100 DB:00 PB:C0
$C2:0009 4C 23 58    JMP [DB:$5823]       ;$00:5823     A:7701 X:07E0 Y:001F D:0100 DB:00 PB:C2

// 5823: merkin tulostusrutiini.
$C2:5823 08          PHP                                A:7701 X:07E0 Y:001F D:0100 DB:00 PB:C2
$C2:5824 C2 20       REP $20                            A:7701 X:07E0 Y:001F D:0100 DB:00 PB:C2
$C2:5826 0B          PHD                                A:7701 X:07E0 Y:001F D:0100 DB:00 PB:C2
$C2:5827 A9 00 02    LDA A, $0200                       A:7701 X:07E0 Y:001F D:0100 DB:00 PB:C2
$C2:582A 5B          TCD                                A:0200 X:07E0 Y:001F D:0100 DB:00 PB:C2
$C2:582B A9 00 00    LDA A, $0000                       A:0200 X:07E0 Y:001F D:0200 DB:00 PB:C2
$C2:582E E2 20       SEP $20                            A:0000 X:07E0 Y:001F D:0200 DB:00 PB:C2
$C2:5830 20 4A 58    JSR DB:$584A         ;$00:584A     A:0000 X:07E0 Y:001F D:0200 DB:00 PB:C2
// jatkuu 5833:ssa
$C2:584A A5 15       LDA [$00:D+$15]      ;$00:0215     A:0000 X:07E0 Y:001F D:0200 DB:00 PB:C2
$C2:584C 0A          ASL A                              A:0010 X:07E0 Y:001F D:0200 DB:00 PB:C2
$C2:584D AA          TAX                                A:0020 X:07E0 Y:001F D:0200 DB:00 PB:C2
// x = merkki*2
// Taulun 5851 sisältö (merkeille 0x00..0x20):
// 0-7   5893 5895 5895 5895  5895 5897 589B 5897
// 8-F   589B 5897 589B 5897  589B 5895 5895 5895
// 10-17 5895 5895 5895 5895  5895 5895 5895 5895
// 18-1F 5895 5895 5895 5895  5895 5895 5895 5895
// 20    5895
//   5893 = ei tulosteta
//   5895 = tulostetaan sellaisenaan
//   5897 = erikoismerkki
//   589B = erikoismerkki, lisäksi kolme spacea

$C2:584E 7C 51 58    JMP [PB:word[PB:$5851+x]] ;$C2:5895 A:0020 X:0020 Y:001F D:0200 DB:00 PB:C
$C2:5895 80 19       BRA $58B0                          A:0020 X:0020 Y:001F D:0200 DB:00 PB:C2
$C2:58B0 18          CLC                                A:0020 X:0020 Y:001F D:0200 DB:00 PB:C2
$C2:58B1 60          RTS                                A:0020 X:0020 Y:001F D:0200 DB:00 PB:C2
// Hyppy 58B2:n ohi, jos carry set
$C2:5833 B0 07       BCS $583C                          A:0020 X:0020 Y:001F D:0200 DB:00 PB:C2
// $230:sta haetaan ohje!
$C2:5835 A5 30       LDA [$00:D+$30]      ;$00:0230     A:0020 X:0020 Y:001F D:0200 DB:00 PB:C2
$C2:5837 0A          ASL A                              A:0000 X:0020 Y:001F D:0200 DB:00 PB:C2
$C2:5838 AA          TAX                                A:0000 X:0020 Y:001F D:0200 DB:00 PB:C2
// Taulun 5842 sisältö:
//  0-1   58B2 = haetaan merkki
//        5BF5 = tulostetaan edellinen merkki
$C2:5839 FC 42 58    JSR [PB:word[PB:$5842+x]] ;$C2:58B2 A:0000 X:0000 Y:001F D:0200 DB:00 PB:C
// 583C: mitä lie?
$C2:583C A9 00       LDA A, $00                         A:0010 X:0022 Y:02A0 D:0200 DB:00 PB:C2
$C2:583E EB          XBA                                A:0000 X:0022 Y:02A0 D:0200 DB:00 PB:C2
$C2:583F 2B          PLD                                A:0000 X:0022 Y:02A0 D:0200 DB:00 PB:C2
$C2:5840 28          PLP                                A:0000 X:0022 Y:02A0 D:0100 DB:00 PB:C2
$C2:5841 6B          RTL                                A:0000 X:0022 Y:02A0 D:0100 DB:00 PB:C2
// merkin tulostusrutiini loppuu tähän.

$C2:5893 38          SEC                                A:0000 X:08B3 Y:0038 D:0000 DB:00 PB:7E S:06FF P:envmxdIZC HC:010 VC:225 02
$C2:5894 60          RTS                                A:0000 X:08B3 Y:0038 D:0000 DB:00 PB:7E S:06FF P:envmxdIZC HC:010 VC:225 02

// Haetaan merkki pointterin osoittamasta paikasta
$C2:58B2 A7 31       LDA [long[D+$31]]    ;$F7:531D     A:0000 X:0000 Y:001F D:0200 DB:00 PB:C2
// Kasvatetaan merkkijonopointteria
$C2:58B4 C2 20       REP $20                            A:003D X:0000 Y:001F D:0200 DB:00 PB:C2
$C2:58B6 E6 31       INC [$00:D+$31]      ;$00:0231     A:003D X:0000 Y:001F D:0200 DB:00 PB:C2
$C2:58B8 E2 20       SEP $20                            A:003D X:0000 Y:001F D:0200 DB:00 PB:C2
// Jos lukuarvo on alle 0xA0...
$C2:58BA C9 A0       CMP A, $A0                         A:003D X:0000 Y:001F D:0200 DB:00 PB:C2
$C2:58BC 90 12       BCC $58D0                          A:003D X:0000 Y:001F D:0200 DB:00 PB:C2

// Merkki oli siis >= 0xA0. Tulostetaan se!
$C2:58BE C2 20       REP $20                            A:00F8 X:0000 Y:001F D:0200 DB:00 PB:C2
$C2:58C0 85 35       STA [$00:D+$35]      ;$00:0235     A:00F8 X:0000 Y:001F D:0200 DB:00 PB:C2
$C2:58C2 E2 20       SEP $20                            A:00F8 X:0000 Y:001F D:0200 DB:00 PB:C2
$C2:58C4 20 C4 5D    JSR [DB:$5DC4]       ;$00:5DC4     A:00F8 X:0000 Y:001F D:0200 DB:00 PB:C2

// Kun merkki on tulostettu, vähennetään jotain laskuria (?)
$C2:58C7 C6 13       DEC [$00:D+$13]      ;$00:0213     A:0000 X:002E Y:0050 D:0200 DB:00 PB:C2
// Jos merkkejä on yhä jäljellä, tulostetaan seuraava.
$C2:58C9 D0 E7       BNE $58B2                          A:0000 X:002E Y:0050 D:0200 DB:00 PB:C2
// Sijoitetaan $10 seuraavaksi tulostettavaksi merkiksi.
$C2:58CB A9 10       LDA A, $10                         A:0000 X:002E Y:0050 D:0200 DB:00 PB:C2
$C2:58CD 85 15       STA [$00:D+$15]      ;$00:0215     A:0010 X:002E Y:0050 D:0200 DB:00 PB:C2
$C2:58CF 60          RTS                                A:0010 X:002E Y:0050 D:0200 DB:00 PB:C2
// Tämä on matkalla pois tulostusrutiinista.



// Jossain korkeammalla tasolla on tällainen:
// Jos se seuraava tulostettava merkki on 0...
$C0:2176 AD 15 02    LDA [DB:$0215]       ;$00:0215     A:0000 X:0058 Y:0200 D:0100 DB:00 PB:C0
$C0:2179 F0 58       BEQ $21D3                          A:0010 X:0058 Y:0200 D:0100 DB:00 PB:C0
// Jos se on 0x10?
$C0:217B C9 10       CMP A, $10                         A:0010 X:0058 Y:0200 D:0100 DB:00 PB:C0
$C0:217D F0 24       BEQ $21A3                          A:0010 X:0058 Y:0200 D:0100 DB:00 PB:C0
// Veikkaan, että 217F on [pause]-käsittelijä.
$C0:21A3 A9 01       LDA A, $01                         A:0010 X:0058 Y:0200 D:0100 DB:00 PB:C0
$C0:21A5 85 36       STA [$00:D+$36]      ;$00:0136     A:0001 X:0058 Y:0200 D:0100 DB:00 PB:C0
$C0:21A7 60          RTS                                A:0001 X:0058 Y:0200 D:0100 DB:00 PB:C0

// Jos arvo oli 0, rutiini loppuu tähän.
$C0:21D3 A2 FF FF    LDX $FFFF                          A:0000 X:0000 Y:0000 D:0100 DB:00 PB:C0
$C0:21D6 86 34       STX [$00:D+$34]      ;$00:0134     A:0000 X:FFFF Y:0000 D:0100 DB:00 PB:C0
$C0:21D8 A9 07       LDA A, $07                         A:0000 X:FFFF Y:0000 D:0100 DB:00 PB:C0
$C0:21DA 85 29       STA [$00:D+$29]      ;$00:0129     A:0007 X:FFFF Y:0000 D:0100 DB:00 PB:C0
$C0:21DC A9 81       LDA A, $81                         A:0007 X:FFFF Y:0000 D:0100 DB:00 PB:C0
$C0:21DE 85 36       STA [$00:D+$36]      ;$00:0136     A:0081 X:FFFF Y:0000 D:0100 DB:00 PB:C0
$C0:21E0 60          RTS                                A:0081 X:FFFF Y:0000 D:0100 DB:00 PB:C0




// Tänne saavutaan, jos merkki oli alle 0xA0. Jos se on alle 0x21 myös...
$C2:58D0 C9 21       CMP A, $21                         A:003D X:0000 Y:001F D:0200 DB:00 PB:C2
$C2:58D2 90 29       BCC $58FD                          A:003D X:0000 Y:001F D:0200 DB:00 PB:C2
// Ei ollut, joten tallennetaan se temppipaikkaan
$C2:58D4 85 3B       STA [$00:D+$3B]      ;$00:023B     A:003D X:0000 Y:001F D:0200 DB:00 PB:C2
$C2:58D6 38          SEC                                A:003D X:0000 Y:001F D:0200 DB:00 PB:C2
$C2:58D7 E9 21       SBC A, $21                         A:003D X:0000 Y:001F D:0200 DB:00 PB:C2
$C2:58D9 0A          ASL A                              A:001C X:0000 Y:001F D:0200 DB:00 PB:C2
$C2:58DA AA          TAX                                A:0038 X:0000 Y:001F D:0200 DB:00 PB:C2
$C2:58DB C2 20       REP $20                            A:0038 X:0038 Y:001F D:0200 DB:00 PB:C2
// Haetaan pointteri dictionarystä
$C2:58DD BF 00 FA DE LDA [$DE:$FA00+x]    ;$DE:FA38     A:0038 X:0038 Y:001F D:0200 DB:00 PB:C2
// Laitetaan talteen se
$C2:58E1 85 37       STA [$00:D+$37]      ;$00:0237     A:FB4B X:0038 Y:001F D:0200 DB:00 PB:C2
$C2:58E3 A9 00 00    LDA A, $0000                       A:FB4B X:0038 Y:001F D:0200 DB:00 PB:C2
$C2:58E6 E2 20       SEP $20                            A:0000 X:0038 Y:001F D:0200 DB:00 PB:C2
$C2:58E8 A9 DE       LDA A, $DE                         A:0000 X:0038 Y:001F D:0200 DB:00 PB:C2
// Ja sen segment-osa
$C2:58EA 85 39       STA [$00:D+$39]      ;$00:0239     A:00DE X:0038 Y:001F D:0200 DB:00 PB:C2
// Haetaan merkkijonon pituus
$C2:58EC A7 37       LDA [long[D+37]]     ;$DE:FB4B     A:00DE X:0038 Y:001F D:0200 DB:00 PB:C2
// Talteen se
$C2:58EE 85 3A       STA [$00:D+$3A]      ;$00:023A     A:0002 X:0038 Y:001F D:0200 DB:00 PB:C2
// Kasvatetaan pointteria
$C2:58F0 C2 20       REP $20                            A:0002 X:0038 Y:001F D:0200 DB:00 PB:C2
$C2:58F2 E6 37       INC [$00:D+$37]      ;$00:0237     A:0002 X:0038 Y:001F D:0200 DB:00 PB:C2
$C2:58F4 E2 20       SEP $20                            A:0002 X:0038 Y:001F D:0200 DB:00 PB:C2
// Varmaankin laskuri sanakirjaesineen hakuun
$C2:58F6 A9 01       LDA A, $01                         A:0002 X:0038 Y:001F D:0200 DB:00 PB:C2
$C2:58F8 85 30       STA [$00:D+$30]      ;$00:0230     A:0001 X:0038 Y:001F D:0200 DB:00 PB:C2
$C2:58FA 4C F5 5B    JMP [DB:$5BF5]       ;$00:5BF5     A:0001 X:0038 Y:001F D:0200 DB:00 PB:C2

// Tänne saavutaan, jos merkki oli < 0x21.
// Koskee kaikkia skriptistä löytyviä merkkejä,
// niin 0x20=Epoch kuin 0x05=NL myös.
$C2:58FD A8          TAY                                A:0013 X:0000 Y:001F D:0200 DB:00 PB:C2
$C2:58FE 0A          ASL A                              A:0013 X:0000 Y:0013 D:0200 DB:00 PB:C2
$C2:58FF AA          TAX                                A:0026 X:0000 Y:0013 D:0200 DB:00 PB:C2
$C2:5900 7C 03 59    JMP [PB:word[PB:$5903+x]]  ;$C2:5B15 A:0026 X:0026 Y:0013 D:0200 DB:00 PB:
// Taulun C2:5903 sisältö:
//  0-7:     594F 5B06 5B06 5945  594F 594F 594F 594F 
//  8-F:     594F 594F 594F 594F  594F 5953 5985 59C8
// 10-17:    5B14 5A26 5A4C 5B15  5B15 5B15 5B15 5B15
// 18-1F:    5B15 5B15 5B3B 5B70  5B70 5B70 5B56 5B9B
// 20:       5BD6
//    5B4F: nl/pausenl/cls/pause/nul
//    5B53: num8
//    5B85: num16
//    5BC8: num32
//    5B14: #$10 ?
//    5B26: <viimeksi ladattu sana>
//    5B4C: tech
//    5B15: player name
//    5B3B: crononick
//    5B70: member #n
//    5B56: Nadia
//    5B9B: item
//    5BD6: Epoch

//   PLAYER NAME - KÄSITTELIJÄ
// y:ssä on se kyseinen merkki.
$C2:5B15 98          TYA                                A:0026 X:0026 Y:0013 D:0200 DB:00 PB:C2
$C2:5B16 38          SEC                                A:0013 X:0026 Y:0013 D:0200 DB:00 PB:C2
$C2:5B17 E9 13       SBC A, $13                         A:0013 X:0026 Y:0013 D:0200 DB:00 PB:C2
$C2:5B19 0A          ASL A                              A:0000 X:0026 Y:0013 D:0200 DB:00 PB:C2
$C2:5B1A AA          TAX                                A:0000 X:0026 Y:0013 D:0200 DB:00 PB:C2
// x:ssä on nyt (merkki-0x13)*2
$C2:5B1B C2 20       REP $20                            A:0000 X:0000 Y:0013 D:0200 DB:00 PB:C2
// Sillä arvolla indeksoidaan taulua 02:5FD8.
// Sisältö: 2C23 2C29 2C2F 2C35
//          2C3B 2C41 2C47 0000
$C2:5B1D BF D8 5F C2 LDA [$C2:$5FD8+x]    ;$C2:5FD8     A:0000 X:0000 Y:0013 D:0200 DB:00 PB:C2
// Saatu pointteri talteen
$C2:5B21 8D 37 02    STA [DB:$0237]       ;$00:0237     A:2C23 X:0000 Y:0013 D:0200 DB:00 PB:C2
$C2:5B24 E2 20       SEP $20                            A:2C23 X:0000 Y:0013 D:0200 DB:00 PB:C2
// Segment
$C2:5B26 A9 7E       LDA A, $7E                         A:2C23 X:0000 Y:0013 D:0200 DB:00 PB:C2
$C2:5B28 8D 39 02    STA [DB:$0239]       ;$00:0239     A:2C7E X:0000 Y:0013 D:0200 DB:00 PB:C2
// Merkintä "merkkejä on jäljellä"
$C2:5B2B A9 01       LDA A, $01                         A:2C7E X:0000 Y:0013 D:0200 DB:00 PB:C2
$C2:5B2D 85 30       STA [$00:D+$30]      ;$00:0230     A:2C01 X:0000 Y:0013 D:0200 DB:00 PB:C2

$C2:5B2F 20 45 5D    JSR [DB:$5D45]       ;$00:5D45     A:2C01 X:0000 Y:0013 D:0200 DB:00 PB:C2
// ^ kutsui strleniä, mutta jatketaan tästä:
// Pituus tallennetaan.
$C2:5B32 8D 3A 02    STA [DB:$023A]       ;$00:023A     A:2C05 X:0000 Y:0005 D:0200 DB:00 PB:C2
$C2:5B35 A9 00       LDA A, $00                         A:2C05 X:0000 Y:0005 D:0200 DB:00 PB:C2
$C2:5B37 EB          XBA                                A:2C00 X:0000 Y:0005 D:0200 DB:00 PB:C2
$C2:5B38 4C F5 5B    JMP [DB:$5BF5]       ;$00:5BF5     A:002C X:0000 Y:0005 D:0200 DB:00 PB:C2


//   CRONONICK - KÄSITTELIJÄ
; 2C23 = Cronon nimen osoite
$C2:5B3B A2 23 2C    LDX $2C23                          A:0034 X:0034 Y:001A D:0200 DB:00 PB:C2
$C2:5B3E A9 7E       LDA A, $7E                         A:0034 X:2C23 Y:001A D:0200 DB:00 PB:C2
$C2:5B40 8E 37 02    STX DB:$0237         ;$00:0237     A:007E X:2C23 Y:001A D:0200 DB:00 PB:C2
$C2:5B43 8D 39 02    STA DB:$0239         ;$00:0239     A:007E X:2C23 Y:001A D:0200 DB:00 PB:C2
$C2:5B46 20 45 5D    JSR DB:$5D45         ;$00:5D45     A:007E X:2C23 Y:001A D:0200 DB:00 PB:C2
// ^ kutsui strleniä, mutta jatketaan tästä:
$C2:5B49 8D 3A 02    STA DB:$023A         ;$00:023A     A:0005 X:2C23 Y:0005 D:0200 DB:00 PB:C2
$C2:5B4C A9 01       LDA A, $01                         A:0005 X:2C23 Y:0005 D:0200 DB:00 PB:C2
$C2:5B4E 85 30       STA [$00:D+$30]      ;$00:0230     A:0001 X:2C23 Y:0005 D:0200 DB:00 PB:C2
$C2:5B50 A9 00       LDA A, $00                         A:0001 X:2C23 Y:0005 D:0200 DB:00 PB:C2
$C2:5B52 EB          XBA                                A:0000 X:2C23 Y:0005 D:0200 DB:00 PB:C2
$C2:5B53 4C F5 5B    JMP DB:$5BF5         ;$00:5BF5     A:0000 X:2C23 Y:0005 D:0200 DB:00 PB:C2


//   EPOCH - KÄSITTELIJÄ
; 2C4D = Epochin nimen osoite
$C2:5BD6 C2 20       REP $20                            A:0040 X:0040 Y:0020 D:0200 DB:00 PB:C2
$C2:5BD8 A9 4D 2C    LDA A, $2C4D                       A:0040 X:0040 Y:0020 D:0200 DB:00 PB:C2
$C2:5BDB 8D 37 02    STA DB:$0237         ;$00:0237     A:2C4D X:0040 Y:0020 D:0200 DB:00 PB:C2
$C2:5BDE E2 20       SEP $20                            A:2C4D X:0040 Y:0020 D:0200 DB:00 PB:C2
$C2:5BE0 A9 7E       LDA A, $7E                         A:2C4D X:0040 Y:0020 D:0200 DB:00 PB:C2
$C2:5BE2 8D 39 02    STA DB:$0239         ;$00:0239     A:2C7E X:0040 Y:0020 D:0200 DB:00 PB:C2
$C2:5BE5 A9 01       LDA A, $01                         A:2C7E X:0040 Y:0020 D:0200 DB:00 PB:C2
$C2:5BE7 85 30       STA [$00:D+$30]      ;$00:0230     A:2C01 X:0040 Y:0020 D:0200 DB:00 PB:C2
$C2:5BE9 20 45 5D    JSR DB:$5D45         ;$00:5D45     A:2C01 X:0040 Y:0020 D:0200 DB:00 PB:C2
// ^ kutsui strleniä, mutta jatketaan tästä:
$C2:5BEC 8D 3A 02    STA DB:$023A         ;$00:023A     A:2C05 X:0040 Y:0005 D:0200 DB:00 PB:C2
$C2:5BEF A9 00       LDA A, $00                         A:2C05 X:0040 Y:0005 D:0200 DB:00 PB:C2
$C2:5BF1 EB          XBA                                A:2C00 X:0040 Y:0005 D:0200 DB:00 PB:C2
$C2:5BF2 4C F5 5B    JMP DB:$5BF5         ;$00:5BF5     A:002C X:0040 Y:0005 D:0200 DB:00 PB:C2

//   MEMBER# -KÄSITTELIJÄ
; y:ssä on se merkki
$C2:5B70 98          TYA                                A:0036 X:0036 Y:001B D:0200 DB:00 PB:C2
$C2:5B71 38          SEC                                A:001B X:0036 Y:001B D:0200 DB:00 PB:C2
$C2:5B72 E9 1B       SBC A, $1B                         A:001B X:0036 Y:001B D:0200 DB:00 PB:C2
; siitä vähennetään $1B
$C2:5B74 AA          TAX                                A:0000 X:0036 Y:001B D:0200 DB:00 PB:C2
;; 7E:2980 -taulua indeksoidaan sillä
$C2:5B75 BF 80 29 7E LDA $7E:($2980+x)    ;$7E:2980     A:0000 X:0000 Y:001B D:0200 DB:00 PB:C2
; Nyt A+$13 on hahmon symboli.
$C2:5B79 0A          ASL A                              A:0000 X:0000 Y:001B D:0200 DB:00 PB:C2
$C2:5B7A AA          TAX                                A:0000 X:0000 Y:001B D:0200 DB:00 PB:C2
$C2:5B7B C2 20       REP $20                            A:0000 X:0000 Y:001B D:0200 DB:00 PB:C2
$C2:5B7D BF D8 5F C2 LDA $C2:($5FD8+x)    ;$C2:5FD8     A:0000 X:0000 Y:001B D:0200 DB:00 PB:C2
$C2:5B81 8D 37 02    STA DB:$0237         ;$00:0237     A:2C23 X:0000 Y:001B D:0200 DB:00 PB:C2
$C2:5B84 E2 20       SEP $20                            A:2C23 X:0000 Y:001B D:0200 DB:00 PB:C2
$C2:5B86 A9 7E       LDA A, $7E                         A:2C23 X:0000 Y:001B D:0200 DB:00 PB:C2
$C2:5B88 8D 39 02    STA DB:$0239         ;$00:0239     A:2C7E X:0000 Y:001B D:0200 DB:00 PB:C2
$C2:5B8B A9 01       LDA A, $01                         A:2C7E X:0000 Y:001B D:0200 DB:00 PB:C2
$C2:5B8D 85 30       STA [$00:D+$30]      ;$00:0230     A:2C01 X:0000 Y:001B D:0200 DB:00 PB:C2
$C2:5B8F 20 45 5D    JSR DB:$5D45         ;$00:5D45     A:2C01 X:0000 Y:001B D:0200 DB:00 PB:C2
// ^ kutsui strleniä, mutta jatketaan tästä:
$C2:5B92 8D 3A 02    STA DB:$023A         ;$00:023A     A:2C05 X:0000 Y:0005 D:0200 DB:00 PB:C2
$C2:5B95 A9 00       LDA A, $00                         A:2C05 X:0000 Y:0005 D:0200 DB:00 PB:C2
$C2:5B97 EB          XBA                                A:2C00 X:0000 Y:0005 D:0200 DB:00 PB:C2
$C2:5B98 4C F5 5B    JMP DB:$5BF5         ;$00:5BF5     A:002C X:0000 Y:0005 D:0200 DB:00 PB:C2




// Tänne päädytään, kun on jokin merkki,
// joka selvästi voidaan tulostaa.
// Haetaan merkki.
$C2:5BF5 A7 37       LDA [long[D+37]]     ;$DE:FB4C     A:0001 X:0038 Y:001F D:0200 DB:00 PB:C2
// Kasvatetaan pointteria
$C2:5BF7 C2 20       REP $20                            A:00C8 X:0038 Y:001F D:0200 DB:00 PB:C2
$C2:5BF9 E6 37       INC [$00:D+$37]      ;$00:0237     A:00C8 X:0038 Y:001F D:0200 DB:00 PB:C2
$C2:5BFB E2 20       SEP $20                            A:00C8 X:0038 Y:001F D:0200 DB:00 PB:C2
// Tapaus c==0x01
$C2:5BFD C9 01       CMP A, $01                         A:00C8 X:0038 Y:001F D:0200 DB:00 PB:C2
$C2:5BFF F0 04       BEQ $5C05                          A:00C8 X:0038 Y:001F D:0200 DB:00 PB:C2
// Tapaus c==0x02
$C2:5C01 C9 02       CMP A, $02                         A:00C8 X:0038 Y:001F D:0200 DB:00 PB:C2
$C2:5C03 D0 07       BNE $5C0C                          A:00C8 X:0038 Y:001F D:0200 DB:00 PB:C2
// Ei ollut 1 tai 2. Merkki talteen.
$C2:5C0C C2 20       REP $20                            A:00C8 X:0038 Y:001F D:0200 DB:00 PB:C2
$C2:5C0E 85 35       STA [$00:D+$35]      ;$00:0235     A:00C8 X:0038 Y:001F D:0200 DB:00 PB:C2
$C2:5C10 E2 20       SEP $20                            A:00C8 X:0038 Y:001F D:0200 DB:00 PB:C2
// Piirretään merkki.
$C2:5C12 20 C4 5D    JSR [DB:$5DC4]       ;$00:5DC4     A:00C8 X:0038 Y:001F D:0200 DB:00 PB:C2

// Piirtää siis merkin joka on osoitteessa $00:0235.
// Tänne päädytään kahdesta osoitteesta:
//  - C2:5C12 (dictionary/character name)
//  - C2:58C4 (plain character)
$C2:5DC4 C2 20       REP $20                            A:00C8 X:0038 Y:001F D:0200 DB:00 PB:C2

//...
$C2:5C15 A9 00       LDA A, $00                         A:0000 X:0028 Y:0050 D:0200 DB:00 PB:C2
// Vähennetään merkkijonon pituutta yhdellä
$C2:5C17 C6 3A       DEC [$00:D+$3A]      ;$00:023A     A:0000 X:0028 Y:0050 D:0200 DB:00 PB:C2
// Jos merkkijono loppui?
$C2:5C19 F0 02       BEQ $5C1D                          A:0000 X:0028 Y:0050 D:0200 DB:00 PB:C2
// Ei loppunut.
$C2:5C1B 09 01       ORA A, $01                         A:0000 X:0028 Y:0050 D:0200 DB:00 PB:C2
// Onko merkkejä jäljellä jonossa?
$C2:5C1D C6 13       DEC [$00:D+$13]      ;$00:0213     A:0001 X:0028 Y:0050 D:0200 DB:00 PB:C2
$C2:5C1F F0 02       BEQ $5C23                          A:0001 X:0028 Y:0050 D:0200 DB:00 PB:C2
// Ei ole.
$C2:5C23 0A          ASL A                              A:0001 X:0028 Y:0050 D:0200 DB:00 PB:C2
$C2:5C24 AA          TAX                                A:0002 X:0028 Y:0050 D:0200 DB:00 PB:C2
// Taulun 5C28 sisältö:
//   5C30 5C32
$C2:5C25 7C 28 5C    JMP [PB:word[PB:$5C28+x]]  ;$C2:5C32 A:0002 X:0002 Y:0050 D:0200 DB:00 PB:
// Merkitään lippu "seuraava merkki pitää hakea"
$C2:5C30 64 30       STZ [$00:D+$30]      ;$00:0230     A:0000 X:0000 Y:00A0 D:0200 DB:00 PB:C2
// Ja paluuarvoksi "skriptin tulostus jatkuu".
$C2:5C32 A9 10       LDA A, $10                         A:0000 X:0000 Y:00A0 D:0200 DB:00 PB:C2
$C2:5C34 85 15       STA [$00:D+$15]      ;$00:0215     A:0010 X:0000 Y:00A0 D:0200 DB:00 PB:C2
$C2:5C36 60          RTS                                A:0010 X:0000 Y:00A0 D:0200 DB:00 PB:C2





   
[1EFA00]
4AFB57FB38FCADFB18FC5FFC05FB9DFB0DFCB7FB44FCCBFC40FC07FCBDFC34FC
2FFC2BFB62FCE2FB90FC0AFCFEFBB0FB76FB15FB2CFC6EFC09FB5BFC58FC41FB
8BFCE8FBE5FB24FCADFC72FB93FBB0FC87FB6DFBC7FC4EFBD2FCDFFBE7FC31FB
82FBFEFC1BFCDEFCBAFB45FBD5FC5DFB4BFC79FB04FC5AFB85FC9CFC67FBEBFC
C0FCA0FBEEFC6BFCEFFBEBFBB3FBB3FC71FCB6FC3CFBA7FC68FC55FCF5FB96FB
8BFB7CFBBEFB53FB47FCCEFCA3FB28FC1EFB36FB8FFB3BFCA4FCDAFCFAFB11FB
94FC01FC1BFB65FC7CFCE2FC18FBDCFB2EFB20FC98FCA0FC80FC61FBCEFB24FB
C1FB21FB0CFB99FB00FB77FCA7FBAAFCC8FBBAFCD1FB4FFCD7FBC3FC11FCFAFC
Tämä pointteritaulu kertoo tavujen 0x21..0x9F merkityksen.

[1B0000]
0000: D200 1001 2000 F102 D0B8 00BA 00FC 4AA1 027E 004A 1020 0100 014A 1105 0000 1600
0020: 6101 0003 101A 1660 0000 000E 5600 ED01 5680 0062 00E0 B103 0019 0000 0000 98C8
0040: 414A 7E02 1000 004A 7F05 004E 8F02 007E 1200 00A0 00A0 0104 8000 0130 4E80 297E
0060: 0B08 0000 8001 204E 232C 7E00 3200
006E: Crono0000Marle00Lu00cca00Robo400000Frog4200y08la001E00gus0000Epoch00

Miten tämä taulu toimii, on täysin mysteeri.

[0C0B69]
20WoodFFSword20IronFFBlade20SteelSaber20LodeFFSword20RedFFKatana20FlintFFEdge20DarkFFSaber20AeonFFBlade20DemonFFEdge2
0AlloyBlade20StarFFSword20VedicBlade20KaliFFBlade20ShivaFFEdge20BoltFFSword20Slasher   21BronzeFFBow21IronFFBow  21Lo
deFFBow  21RobinFFBow 21SageFFBow  21DreamFFBow 21CometArrow21SonicArrow21Valkerye  21Siren     21          21
   21          21          22AirFFGun   22DartFFGun  22AutoFFGun  22PicoMagnum22PlasmaFFGun22RubyFFGun  22DreamFFGun
22Megablast 22ShockFFWave22WonderShot22Graedus   22          22          22          22          23TinFFArm   23Hamme
rFFArm23MirageHand23StoneFFArm 23DoomFinger23MagmaFFHand23MegatonArm23BigFFHand  23KaiserFFArm23GigaFFArm  23TerraFFA
rm 23CrisisFFArm23          24BronzeEdge24IronFFSword24Masamune  24FlashBlade24PearlFFEdge24RuneFFBlade24BraveSword24
jne jne.
Item listing selvästi. Selvitä, missä on pointterit.

[0C3A00]
Tässä on taulu hyökkäysten selityksistä.
Ensin on tällainen: 02F9BB1233ED01DA00
Sitten on pointer-table (alkaa 3A09:stä),
ja itse stringit. Stringit alkavat 0C3B0D:stä,
eli taulun koko on 130 stringiä.

[0C6500]
Nu         Reptite    Terrasaur  Kilwala    Krawlie    Hench      Omicrone   Martello   Bellbird   Panel      
Mammon M.             Blue Imp   Green Imp  Stone Imp  Mud Imp    Roly       Poly       Rolypoly   Roly Rider 
           Blue EagletGold EagletRed Eaglet            Avian ChaosImp Ace    Bantam Imp Gnasher    Gnawer     
Naga&ette             Ruminator             Octopod    Octoblush  Octobino   Zeal       Fly Trap   Meat Eater!
jne.
Tyystin pakkaamaton lista monster-nimistä. 11-merkkisiä merkkijonoja,
spacepadded.

[0CCD00]
Tässä näkyy ruutu, jossa on repliikkejä.
Taitavat olla taistelunaikaisia repliikkejä.

[18D000]
Jälleen lyhyt pätkä repliikkejä.
Alkaa pointterilistalla!
18D09C:stä alkaa itse repliikit.
Pointtereita on siis 78 kpl.
D09C, D0B4, D106, D146, jne.
